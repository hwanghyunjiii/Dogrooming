<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}"
      th:with="metaTitle='예약조회'">
<head>
</head>

<body>
<!-- content -->
<th:block layout:fragment="content">

    <!-- slider Area Start-->
    <div th:include="components/sliderArea :: sliderArea('예약 조회')"></div>
    <!-- slider Area End-->

    <!-- 예약 횟수, 금액 Start -->
    <section class="border-bottom mt-40">
        <div class="container box_1170">
            <h3 class="text-heading">노하람 고객님은
                <span class="text-primary text-md">2회</span>
                예약하셨고, 총
                <span class="text-primary text-md">80,000원</span>
                결제하셨어요.
            </h3>
        </div>
    </section>

    <!-- 예약 횟수, 금액 End -->
    <section class="mt-40 mb-40">
        <div class="container box_1170">
            <label class="mr-10 mt-1">기간 선택</label>
            <div class="row">
                <div class="col-lg-2 col-md-3 col-4">
                    <input type="text" id="datePicker_from" class="form-control bg-white" readonly>
                </div>
                ~
                <div class="col-lg-2 col-md-3 col-4">
                    <input type="text" id="datePicker_to" class="form-control bg-white" readonly>
                </div>
            </div>
        </div>
    </section>

    <!-- 예약조회 Start -->
    <section class="cart_area">
        <div class="container">
            <div class="cart_inner">
                <div class="table-responsive" th:if="${!reservationList.isEmpty()}">
                    <table class="table">
                        <tbody>
                        <tr th:each="reservation : ${reservationList}">
                            <td>
                                <div class="media">
                                    <div>
                                        <i class="fa fa-heart"></i>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div class="media-body">
                                    <div th:if="${reservation.reservationState == 1 and reservation.useState == 0}">
                                        <label class="mr-10" th:text="${reservation.seller_Admin.name}" ></label>
                                        <label class="text-primary mr-10" >진행 전</label>
                                        <a href="#" class="genric-btn info radius small">예약 취소</a>
                                    </div>
                                    <div th:if="${reservation.reservationState == 2 and reservation.useState == 0}">
                                        <label class="mr-10" th:text="${reservation.seller_Admin.name}" ></label>
                                        <label class="text-primary mr-10" >진행 중</label>
                                        <a href="#" class="genric-btn info radius small">예약 완료 처리</a>
                                    </div>
                                    <div th:if="${reservation.reservationState == 3 and reservation.useState == 0}">
                                        <label class="mr-10" th:text="${reservation.seller_Admin.name}" ></label>
                                        <label class="text-primary mr-10" >완료</label>
                                        <a href="#" class="genric-btn info radius small">리뷰 쓰기</a>
                                    </div>
                                    <div th:if="${reservation.useState == 1}">
                                        <label class="mr-10" th:text="${reservation.seller_Admin.name}" ></label>
                                        <label class="text-primary mr-10" >취소</label>
                                    </div>
                                    <div>
                                        <span class="small" th:text="${#calendars.format(reservation.reservationDate, 'yyyy년 MM월 dd일 HH시 mm분')}"></span>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div>
                                    <label class="small" th:text="${reservation.product.name}"></label>
                                </div>
                               <div>
                                   <label class="mr-2">결제</label><label th:text="${#numbers.formatInteger(reservation.product.amount, 0, 'COMMA')}"></label><label>원</label>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="blog_left_sidebar" th:if="${!reservationList.isEmpty()}">
            <nav class="blog-pagination justify-content-center d-flex"
                 th:with="
                        pageNumber = ${reservationList.pageable.pageNumber},
                        pageSize = ${reservationList.pageable.pageSize},
                        totalPages = ${reservationList.totalPages},
                        startPage = ${T(Math).floor(pageNumber / pageSize) * pageSize + 1},
                        tempEndPage = ${startPage + pageSize - 1},
                        endPage = (${tempEndPage < totalPages ? tempEndPage : totalPages})"
                    aria-label="Page navigation">
                <ul class="pagination ">
                    <!-- 처음으로 이동 -->
                    <li th:classappend="${pageNumber < pageSize} ? 'disabled'" class="page-item">
                        <a class="page-link" th:href="@{/(page=0)}">
                            <span>&laquo;</span>
                            <span class="sr-only">First</span>
                        </a>
                    </li>

                    <!-- 이전으로 이동 -->
                    <li th:classappend="${reservationList.first} ? 'disabled'" class="page-item">
                        <a class="page-link" th:href="${reservationList.first} ? '#' : @{/reservation?(page=${pageNumber - 1})}" aria-label="Previous">
                            <span aria-hidden="true">&lt;</span>
                            <span class="sr-only">Previous</span>
                        </a>
                    </li>

                    <!-- 특정 페이지로 이동 -->
                    <li th:each="page: ${#numbers.sequence(startPage, endPage)}" th:classappend="${page == pageNumber + 1} ? 'active'" class="page-item">
                        <a th:text="${page}" class="page-link" th:href="@{/reservation?(page=${page - 1})}"></a>
                    </li>

                    <!-- 다음으로 이동 -->
                    <li th:classappend="${reservationList.last} ? 'disabled'" class="page-item">
                        <a class="page-link" th:href="${reservationList.last} ? '#' : @{/reservation?(page=${pageNumber + 1})}" aria-label="Next">
                            <span aria-hidden="true">&gt;</span>
                            <span class="sr-only">Next</span>
                        </a>
                    </li>

                    <!-- 마지막으로 이동 -->
                    <li th:classappend=" ${T(Math).floor(totalPages / pageSize) * pageSize - 1 <= startPage} ? 'disabled'" class="page-item">
                        <a class="page-link" th:href="@{/(page=${totalPages - 1})}">
                            <span>&raquo;</span>
                            <span class="sr-only">Last</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </section>

    <!-- 예약조회 End -->


    <!-- //content -->

    <script type="text/javascript">
        $(function(){

            $('#datePicker_from').datepicker({
                format: "yyyy-mm-dd",
                language: "kr",
                todayHighlight: true
            });

            $('#datePicker_to').datepicker({
                format: "yyyy-mm-dd",
                language: "kr",
                todayHighlight: true
            });

            //(-1D:하루전, -1M:한달전, -1Y:일년전), (+1D:하루후, -1M:한달후, -1Y:일년후)
            $('#datePicker_from').datepicker('setDate', '-1Y');
            $('#datePicker_to').datepicker('setDate', 'today');

        });
    </script>

</th:block>
</body>
</html>
